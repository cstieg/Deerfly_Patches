@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@ViewBag.session["user"]


<div>
    @foreach (string item in ViewBag.Session.Keys)
    {
        <p>@Html.DisplayFor(m => item)</p>
    }
</div>



<div class="col-xs-12 col-md-10 col-lg-6">
    <form id="shipping-address" class="centered">
        <label for="ship-to">Ship To:</label>
        <input name="ship-to" type="text" />
        <br />
        <label for="address1">Address line 1</label>
        <input name="address1" type="text" />
        <br />
        <label for="address2">Address line 2</label>
        <input name="address2" type="text" />
        <br />
        <label for="city">City</label>
        <input name="city" type="text" />
        <br />
        <label for="state">State/Province</label>
        <input name="state" type="text" />
        <br />
        <label for="zip">Zip/Postal Code</label>
        <input name="zip" type="text" />
        <br />
        <label for="country">Country</label>
        <input name="country" type="text" />
        <br />
        <label for="phone">Phone</label>
        <input name="phone" type="text" />

        <button onclick="updateShippingAddress()">Save Shipping Address</button>
    </form>

</div>




<div class="row" id="paypal-button" onload="renderPayPal();"></div>

<script src="https://www.paypalobjects.com/api/checkout.js"></script>

<script>
    var CREATE_PAYMENT_URL = '/paypal/createOrder';
    var EXECUTE_PAYMENT_URL = '/paypal/executePayment';

    paypal.Button.render({

        env: 'sandbox', // Or 'sandbox' / production

        commit: true, // Show a 'Pay Now' button

        payment: function () {
            return paypal.request.post(CREATE_PAYMENT_URL).then(function (data) {
                return data.id;
            });
        },

        onAuthorize: function (data) {
            return paypal.request.post(EXECUTE_PAYMENT_URL, {
                paymentID: data.paymentID,
                payerID: data.payerID
            }).then(function (data) {
                debugger;
                // The payment is complete!
                // You can now show a confirmation message to the customer
            });
        }

    }, '#paypal-button');
</script>