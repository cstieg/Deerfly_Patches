STEPS FOR PUBLISHING ASP.NET (MVC) APPLICATION TO AMAZON WEB SERVICES USING ELASTIC BEANSTALK AND
MICROSOFT VISUAL STUDIO 2017

Download AWS Toolkit for Visual Studio
	* Use NuGet package manager

Sign up for AWS
	Create user (IAM Management Console)
	In Security Credentials tab, Create Access Key, save AccessKey Id and Secret Key (CSV)
	In Visual Studio AWS Explorer, Add or Edit Profile
		Import from CSV file saved previously
	

Create project (Elastic Beanstalk)
Will Need 
 * EC2 (Compute engine)
 * EPS (Environment)
 * RDS (Relational Database System)
 * S3 (Simple Storage Service)

Go to console.aws.amazon.com
	Create key pair
	** Make sure to save .pem file!!

In the console, go to the RDS service
	Create new database
	Choose region (us-east-2)
	Under details, note:
		endpoint (<instance-name>.<region>.rds.amazonaws.com) -- not including port (:1433)
		port (1433)
		username
		password

In Visual Studio, 
	Open SQL Server Explorer, right-click SQL Server
		Add SQL Server
		Paste endpoint name into Server Name blank
		Change Authentication to SQL Server Authentication
		Input username and password
		Leave Database Name as <default>
		Connect

	Click on newly created SQL Server (<instance-name>.<region>.rds.amazonaws.com)
		Right-click on Databases
		Add new database, choose identifying name

	Open Server Explorer, right-click Data Connections
		Add Connection
		Change Data source to Microsoft SQL Server
		Paste endpoint name into Server Name blank
		Change Authentication to SQL Server Authentication
		Input username and password
		Can test connection
		Select database name previously assigned

	In project's web.config file,
		Add a key with a connectionString that looks something like this:

connectionString="Data Source=**INSTANCENAME**.**REGION**.rds.amazonaws.com,1433;Initial Catalog=**DATABASENAME**;Persist Security Info=True;User ID=**USERID**;Password=**PASSWORD**;Encrypt=False"/>

		Make sure ApplicationDbContext uses this key as the first parameter in the constructor

	Project -> <Project> Properties
		Package/Publish Web -> Include all databases configured in Package/Publish SQL tab -> checked
		Package/Publish SQL
			Import connection strings from web.config
			Make sure the Connection String for Destination Database is the connection string including <instance-name>.<region>.rds.amazonaws.com,1433
			Make sure the Connection String for Source Database is the connection string to the local SQL Server
		Save

	Nuget Package Manager Console
		Type 'Update-Database'

	Solution Explorer
		Right-click on solution name
		Click 'Publish to AWS Elastic Beanstalk'
		Make sure that the region is the same as the region used for the database
		Click 'Create new environment'
		Choose environment name, server name
		Container type = 64bit Windows Server 2016 v.1.2.0 running IIS 10.0
		Instance type = t2.micro (free tier)	 
		Accept defaults
		Publish



Can see published files in S3 bucket (created automatically by Elastic Beanstalk)

To delete an instance, must go to Elastic Beanstalk console and remove app.
	Deleting an instance in EC2 created by Elastic Beanstalk will only cause it to recreate another clone.



To programmatically access S3 storage, need Access Key and Secret Key
	Use Amazon.S3 SDK (Package manager)


To install SSL:



